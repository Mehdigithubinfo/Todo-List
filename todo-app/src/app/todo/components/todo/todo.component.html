<!-- todo.component.html -->
<div class="todo-container">
  <h2>Todo List</h2>

  <div class="stats">
    <span>Total: {{ todos().length }}</span>
    <span>Completed: {{ completedCount() }}</span>
    <span>Working: {{ workingCount() }}</span>
    <!-- âœ… Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† progress percentage -->
    <span>Progress: {{ progressPercentage() }}%</span>
  </div>

  <!-- âœ… Progress Bar Section -->
  <div class="progress-section">
    <div class="progress-info">
      <span class="progress-text">Progress: {{ progressPercentage() }}%</span>
      <span class="progress-details">
        ({{ completedCount() }}/{{ todos().length }})
      </span>
    </div>

    <div class="progress-bar-container">
      <div
        class="progress-bar"
        [style.width]="progressBarWidth()"
        [class]="progressStatus()"
      ></div>
    </div>

    <!-- âœ… Progress Message -->
    <div class="progress-message" [class]="progressStatus() + '-message'">
      @switch (progressStatus()) { @case ('not-started') {
      <span>ğŸ“ Let's get started! Add your first todo.</span>
      } @case ('in-progress') {
      <span>ğŸš€ You're making progress! Keep going!</span>
      } @case ('almost-done') {
      <span>ğŸ¯ Almost there! Finish strong!</span>
      } @case ('completed') {
      <span>ğŸ‰ All done! Great job!</span>
      } }
    </div>
  </div>

  <div class="add-todo">
    <input
      type="text"
      [value]="newTodo()"
      (input)="updateNewTodo($event)"
      (keyup.enter)="addTodo()"
      placeholder="Enter new todo"
      #todoInput
    />
    <button (click)="addTodo()" [disabled]="!newTodo().trim()">Add</button>
  </div>

  <ul class="todo-list">
    @for (todo of todos(); track todo.id; let i = $index) {
    <li
      class="todo-item"
      [class.completed]="todo.completed"
      [class.pending]="!todo.completed"
    >
      <div class="todo-content">
        <input
          type="checkbox"
          [checked]="todo.completed"
          (change)="toggleTodo(todo.id)"
          class="todo-checkbox"
        />
        <span class="todo-title"> {{ i + 1 }}) {{ todo.title }} </span>
      </div>
      <button
        class="delete-btn"
        (click)="deleteTodo(todo.id)"
        aria-label="Delete todo"
      >
        Ã—
      </button>
    </li>
    } @empty {
    <li class="empty-state">No todos yet. Add one above!</li>
    }
  </ul>
</div>
